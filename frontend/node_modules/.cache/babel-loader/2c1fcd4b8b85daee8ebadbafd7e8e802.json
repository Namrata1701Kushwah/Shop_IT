{"ast":null,"code":"import _objectSpread from\"/home/ibm/shopit/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/home/ibm/shopit/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"isAdmin\",\"component\"];import{Route,Redirect}from'react-router-dom';import{useSelector}from'react-redux';import{Fragment}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var ProtectedRoute=function ProtectedRoute(_ref){var isAdmin=_ref.isAdmin,Component=_ref.component,rest=_objectWithoutProperties(_ref,_excluded);var _useSelector=useSelector(function(state){return state.auth;}),isAuthenticated=_useSelector.isAuthenticated,loading=_useSelector.loading,user=_useSelector.user;console.log(\"data auth\",loading,user===null||user===void 0?void 0:user.role);return/*#__PURE__*/_jsx(Fragment,{children:loading===false&&/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:function render(props){if(isAuthenticated===false){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}if(isAdmin==true&&user.role!=='admin'){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(Component,_objectSpread({},props));}}))});};export default ProtectedRoute;","map":{"version":3,"names":["Route","Redirect","useSelector","Fragment","ProtectedRoute","isAdmin","Component","component","rest","state","auth","isAuthenticated","loading","user","console","log","role","props"],"sources":["/home/ibm/shopit/frontend/src/components/route/ProtectedRoute.js"],"sourcesContent":["import { Route, Redirect } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { Fragment } from 'react';\n\n\n\nconst ProtectedRoute = ({isAdmin, component: Component, ...rest }) => {\n    const { isAuthenticated, loading, user } = useSelector(state => state.auth)\n    console.log(\"data auth\",loading, user?.role);\n    return (\n        <Fragment>\n        {loading === false && (\n            <Route\n                {...rest}\n                render={props => {\n                    if (isAuthenticated === false) {\n                        return <Redirect to='/login' />\n                    }\n                  \n                    if(isAdmin == true && user.role !== 'admin'){\n                        return <Redirect to =\"/\" />\n                    }\n                   \n\n                    return <Component {...props} />\n                }}\n            />\n        )}\n    </Fragment>\n\n  \n\n\n    )\n}\n\n\nexport default ProtectedRoute;"],"mappings":"uRAAA,OAASA,KAAT,CAAgBC,QAAhB,KAAgC,kBAAhC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,QAAT,KAAyB,OAAzB,C,2CAIA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,MAA+C,IAA7CC,QAA6C,MAA7CA,OAA6C,CAAzBC,SAAyB,MAApCC,SAAoC,CAAXC,IAAW,0CAClE,iBAA2CN,WAAW,CAAC,SAAAO,KAAK,QAAIA,MAAK,CAACC,IAAV,EAAN,CAAtD,CAAQC,eAAR,cAAQA,eAAR,CAAyBC,OAAzB,cAAyBA,OAAzB,CAAkCC,IAAlC,cAAkCA,IAAlC,CACAC,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAwBH,OAAxB,CAAiCC,IAAjC,SAAiCA,IAAjC,iBAAiCA,IAAI,CAAEG,IAAvC,EACA,mBACI,KAAC,QAAD,WACCJ,OAAO,GAAK,KAAZ,eACG,KAAC,KAAD,gCACQJ,IADR,MAEI,MAAM,CAAE,gBAAAS,KAAK,CAAI,CACb,GAAIN,eAAe,GAAK,KAAxB,CAA+B,CAC3B,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACH,CAED,GAAGN,OAAO,EAAI,IAAX,EAAmBQ,IAAI,CAACG,IAAL,GAAc,OAApC,CAA4C,CACxC,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE,GAAd,EAAP,CACH,CAGD,mBAAO,KAAC,SAAD,kBAAeC,KAAf,EAAP,CACH,CAbL,GAFJ,EADJ,CAyBH,CA5BD,CA+BA,cAAeb,eAAf"},"metadata":{},"sourceType":"module"}