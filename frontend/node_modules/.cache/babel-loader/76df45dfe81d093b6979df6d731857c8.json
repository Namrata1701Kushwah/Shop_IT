{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layouts/MetaData';import Loader from'../layouts/Loader';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAdminProducts,clearErrors,deleteProduct}from'../../actions/productActions';import{DELETE_PRODUCT_RESET}from'../../constants/productConstants';import Sidebar from'./Sidebar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductList=function ProductList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state===null||state===void 0?void 0:state.products;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products;var _useSelector2=useSelector(function(state){return state.product;}),deleteErrror=_useSelector2.error,isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(getAdminProducts());if(error){alert.error(error);dispatch(clearErrors());}if(deleteErrror){alert.deleteErrror(error);dispatch(clearErrors());}if(isDeleted){alert.success(\"Product Deleted Successfully\");history.push(\"/admin/products\");dispatch({type:'DELETE_PRODUCT_RESET '});}},[dispatch,alert,error,deleteErrror,isDeleted,history]);var setProducts=function setProducts(){var _products$products;var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Name',field:'name',sort:'asc'},{label:'Prpce',field:'price',sort:'asc'},{label:'Stock',field:'stock',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};// console.log(\"pro\",products.products);\nproducts===null||products===void 0?void 0:(_products$products=products.products)===null||_products$products===void 0?void 0:_products$products.forEach(function(product){var _data$rows;data===null||data===void 0?void 0:(_data$rows=data.rows)===null||_data$rows===void 0?void 0:_data$rows.push({id:product===null||product===void 0?void 0:product._id,name:product===null||product===void 0?void 0:product.name,price:\"$\".concat(product===null||product===void 0?void 0:product.price),stock:product===null||product===void 0?void 0:product.stock,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/product/\".concat(product===null||product===void 0?void 0:product._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"45px\",marginTop:\"-60px\"},className:\"btn btn-danger py-1 px-6 ml-7\",onClick:function onClick(){return deleteProductHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};var deleteProductHandler=function deleteProductHandler(id){dispatch(deleteProduct(id));};// console.log(\"KKKKKKKK\",products);\nreturn/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Product'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"All Products\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default ProductList;","map":{"version":3,"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","useAlert","useDispatch","useSelector","getAdminProducts","clearErrors","deleteProduct","DELETE_PRODUCT_RESET","Sidebar","ProductList","history","alert","dispatch","state","products","loading","error","product","deleteErrror","isDeleted","success","push","type","setProducts","data","columns","label","field","sort","rows","forEach","id","_id","name","price","stock","actions","marginLeft","marginTop","deleteProductHandler"],"sources":["/home/ibm/shopit/frontend/src/components/admin/ProductList.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTable } from 'mdbreact'\nimport MetaData from '../layouts/MetaData'\nimport Loader from '../layouts/Loader'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getAdminProducts, clearErrors, deleteProduct } from '../../actions/productActions'\nimport { DELETE_PRODUCT_RESET } from '../../constants/productConstants'\nimport Sidebar from './Sidebar'\n\n\n\n\n\nconst ProductList = ({ history }) => {\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, products } = useSelector(state => state?.products);\n    const {error:deleteErrror, isDeleted} = useSelector(state=>state.product)\n\n    useEffect(() => {\n        dispatch(getAdminProducts());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (deleteErrror) {\n            alert.deleteErrror(error);\n            dispatch(clearErrors())\n        }\n        if(isDeleted){\n            alert.success(\"Product Deleted Successfully\")\n            history.push(\"/admin/products\")\n            dispatch({type : 'DELETE_PRODUCT_RESET '})\n        }\n\n    }, [dispatch, alert, error ,deleteErrror, isDeleted, history])\n\n    const setProducts = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Name',\n                    field: 'name',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Prpce',\n                    field: 'price',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Stock',\n                    field: 'stock',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Actions',\n                    field: 'actions',\n\n                },\n            ],\n            rows: []\n        }\n// console.log(\"pro\",products.products);\n        products?.products?.forEach(product => {\n            data?.rows?.push({\n                id: product?._id,\n                name: product?.name,\n                price: `$${product?.price}`,\n                stock: product?.stock,\n                actions:\n                    <Fragment>\n                        <Link to={`/admin/product/${product?._id}`} className=\"btn btn-primary py-1 px-2\">\n                            <i className='fa fa-pencil'></i>\n                        </Link>\n\n                        <button style={{marginLeft: \"45px\", marginTop: \"-60px\"}} className='btn btn-danger py-1 px-6 ml-7' onClick={()=>deleteProductHandler(product._id)} >\n                            <i className='fa fa-trash'></i>\n                        </button>\n                    </Fragment>\n\n            })\n        })\n\n        return data;\n    }\n\n\n    const deleteProductHandler = (id)=>{\n        dispatch(deleteProduct(id))\n    }\n// console.log(\"KKKKKKKK\",products);\n    return (\n        <Fragment>\n            <MetaData title={'All Product'} />\n            <div className='row'>\n                <div className='col-12 col-md-2'>\n                    <Sidebar />\n\n                </div>\n                <div className='col-12 col-md-10'>\n                    <Fragment>\n                        <h1 className='my-5'>All Products</h1>\n                        {loading ? <Loader /> : (\n                            <MDBDataTable\n                                data={setProducts()}\n                                className=\"px-3\"\n                                bordered\n                                striped\n                                hover\n                            />\n                        )}\n                    </Fragment>\n\n                </div>\n\n            </div>\n\n        </Fragment>\n    )\n}\n\n\nexport default ProductList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}