{"ast":null,"code":"import axios from 'axios';\nimport { ALL_PRODUCTS_REQUEST, ALL_PRODUCTS_SUCCESS, ALL_PRODUCTS_FAIL, PRODUCT_DETAILS_SUCCESS, PRODUCT_DETAILS_REQUEST, PRODUCT_DETAILS_FAIL, NEW_REVIEW_REQUEST, NEW_REVIEW_SUCCESS, NEW_REVIEW_RESET, NEW_REVIEW_FAIL, CLEAR_ERRORS } from '../constants/productConstants';\nexport const getProducts = function () {\n  let keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let currentPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let price = arguments.length > 2 ? arguments[2] : undefined;\n  let category = arguments.length > 3 ? arguments[3] : undefined;\n  let rating = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  return async dispatch => {\n    try {\n      dispatch({\n        type: ALL_PRODUCTS_REQUEST\n      }); // let link = `/api/v1/products?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}\n      // &price[gte]=${price[0]}`\n\n      let link = `/api/v1/products?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&ratings[gte]=${rating}`;\n\n      if (category) {\n        //   console.log(\"Actionnnnnnnnnnnnnnnnnnnnnnnnnn\",category)\n        link = `/api/v1/products?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}&price[gte]=${price[0]}&category=${category}&ratings[gte]=${rating}`;\n      }\n\n      const {\n        data\n      } = await axios.get(link); // console.log(\"===============================================\",data);\n\n      dispatch({\n        type: ALL_PRODUCTS_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      dispatch({\n        type: ALL_PRODUCTS_FAIL,\n        payload: error.response.data.message\n      });\n    }\n  };\n};\nexport const getProductDetails = id => async dispatch => {\n  try {\n    dispatch({\n      type: PRODUCT_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`/api/v1/product/${id}`);\n    dispatch({\n      type: PRODUCT_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_DETAILS_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};\nexport const newReview = reviewData => async dispatch => {\n  try {\n    dispatch({\n      type: NEW_REVIEW_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': \"application/json\"\n      }\n    };\n    const {\n      data\n    } = await axios.put(`/api/v1/review`, reviewData, config);\n    dispatch({\n      type: NEW_REVIEW_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: NEW_REVIEW_FAIL,\n      payload: error.response.data.message\n    });\n  }\n}; //Clear Error\n\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"names":["axios","ALL_PRODUCTS_REQUEST","ALL_PRODUCTS_SUCCESS","ALL_PRODUCTS_FAIL","PRODUCT_DETAILS_SUCCESS","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_FAIL","NEW_REVIEW_REQUEST","NEW_REVIEW_SUCCESS","NEW_REVIEW_RESET","NEW_REVIEW_FAIL","CLEAR_ERRORS","getProducts","keyword","currentPage","price","category","rating","dispatch","type","link","data","get","payload","error","response","message","getProductDetails","id","newReview","reviewData","config","headers","put","success","clearErrors"],"sources":["/home/ibm/shopit/frontend/src/actions/productActions.js"],"sourcesContent":["import axios from 'axios';\nimport {\n    ALL_PRODUCTS_REQUEST , \n    ALL_PRODUCTS_SUCCESS, \n    ALL_PRODUCTS_FAIL,\n    \n    PRODUCT_DETAILS_SUCCESS,\n    PRODUCT_DETAILS_REQUEST,\n    PRODUCT_DETAILS_FAIL,\n    NEW_REVIEW_REQUEST,\n    NEW_REVIEW_SUCCESS,\n    NEW_REVIEW_RESET,\n    NEW_REVIEW_FAIL,\n    CLEAR_ERRORS\n} from  '../constants/productConstants'\n\n\nexport const getProducts = (keyword=\"\" ,currentPage = 1, price , category ,rating=0)=> async(dispatch)=>{\n  \n    try {\n        dispatch({type :ALL_PRODUCTS_REQUEST})\n         \n        // let link = `/api/v1/products?keyword=${keyword}&page=${currentPage}&price[lte]=${price[1]}\n        // &price[gte]=${price[0]}`\n      let link=`/api/v1/products?keyword=${keyword}&page=${currentPage}&price[lte]=${price\n        [1]}&price[gte]=${price[0]}&ratings[gte]=${rating}`\n      \n      if(category){\n        //   console.log(\"Actionnnnnnnnnnnnnnnnnnnnnnnnnn\",category)\n\n        link=`/api/v1/products?keyword=${keyword}&page=${currentPage}&price[lte]=${price\n            [1]}&price[gte]=${price[0]}&category=${category}&ratings[gte]=${rating}`\n      }\n\n\n        const {data} = await axios.get(link)\n        // console.log(\"===============================================\",data);\n        dispatch({\n            type: ALL_PRODUCTS_SUCCESS,\n            payload:data\n        })\n        \n    } catch (error) {\n        dispatch({\n            type : ALL_PRODUCTS_FAIL,\n            payload : error.response.data.message\n        })\n        \n    }\n}\n\nexport const getProductDetails = (id)=> async(dispatch)=>{\n    try {\n        dispatch({type :PRODUCT_DETAILS_REQUEST})\n        const {data} = await axios.get(`/api/v1/product/${id}`)\n        dispatch({\n            type: PRODUCT_DETAILS_SUCCESS,\n            payload:data\n        })\n        \n    } catch (error) {\n        dispatch({\n            type : PRODUCT_DETAILS_FAIL,\n            payload : error.response.data.message\n        })\n        \n    }\n}\n\nexport const newReview = (reviewData)=> async(dispatch)=>{\n    try {\n        dispatch({type :NEW_REVIEW_REQUEST})\n\n        const config = {\n            headers : {\n                'Content-Type' : \"application/json\"\n            }\n        }\n        const {data} = await axios.put(`/api/v1/review`, reviewData, config)\n        dispatch({\n            type:NEW_REVIEW_SUCCESS,\n            payload:data.success\n        })\n        \n    } catch (error) {\n        dispatch({\n            type : NEW_REVIEW_FAIL,\n            payload : error.response.data.message\n        })\n        \n    }\n}\n\n\n//Clear Error\n\nexport const clearErrors = ()=>async(dispatch)=>{\n    dispatch({\n        type:CLEAR_ERRORS\n    })\n    \n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}