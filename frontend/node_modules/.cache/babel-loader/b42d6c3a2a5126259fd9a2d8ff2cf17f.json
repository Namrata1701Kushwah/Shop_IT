{"ast":null,"code":"import{Fragment}from'react';import{Link}from'react-router-dom';import MetaData from\"../layouts/MetaData\";import{useAlert}from\"react-alert\";import{useDispatch,useSelector}from\"react-redux\";import{addItemToCart,removeItemFromCart}from\"../../actions/cartActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(_ref){var history=_ref.history;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.cart;}),cartItems=_useSelector.cartItems;// console.log(cartItems)\n// console.log(cartItems.length)\nvar removeItemCartHandler=function removeItemCartHandler(id){dispatch(removeItemFromCart(id));};var increaseQty=function increaseQty(id,quantity,stock){var newQty=quantity+1;if(newQty>stock)return;dispatch(addItemToCart(id,newQty));};var decreaseQty=function decreaseQty(id,quantity){var newQty=quantity-1;if(newQty<=0)return;dispatch(addItemToCart(id,newQty));};var checkoutHandler=function checkoutHandler(){history.push('/login?redirect=ship');};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Your Cart'}),cartItems.length===0?/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5\",children:\"YOur Cart is Empty\"}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"mt-5\",children:[\"Your Cart: \",/*#__PURE__*/_jsxs(\"b\",{children:[cartItems.length,\"items\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-8\",children:cartItems.map(function(item){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-3\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"Laptop\",height:\"90\",width:\"115\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-lg-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/ products/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsx(\"p\",{id:\"card_item_price\",children:item.price})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-3 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stockCounter d-inline\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-danger minus\",onClick:function onClick(){return decreaseQty(item.product,item.quantity);},children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control count d-inline\",value:item.quantity,readOnly:true}),/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-primary plus\",onClick:function onClick(){return increaseQty(item.product,item.quantity,item.stock);},children:\"+\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-1 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsx(\"i\",{id:\"delete_cart_item\",className:\"fa fa-trash btn btn-danger\",onClick:function onClick(){return removeItemCartHandler(item.product);}})})]})},item.product),/*#__PURE__*/_jsx(\"hr\",{})]});})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-3 my-4\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"order_summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal:  \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[cartItems.reduce(function(acc,item){return acc+Number(item.quantity);},0),\" (Units)\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Est. total: \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",cartItems.reduce(function(acc,item){return acc+item.quantity*item.price;},0).toFixed(2)]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"checkout_btn\",className:\"btn btn-primary btn-block\",onClick:checkoutHandler,children:\"Check out\"})]})})]})]})]});};export default Cart;","map":{"version":3,"names":["Fragment","Link","MetaData","useAlert","useDispatch","useSelector","addItemToCart","removeItemFromCart","Cart","history","dispatch","state","cart","cartItems","removeItemCartHandler","id","increaseQty","quantity","stock","newQty","decreaseQty","checkoutHandler","push","length","map","item","image","product","name","price","reduce","acc","Number","toFixed"],"sources":["/home/ibm/shopit/frontend/src/components/cart/Cart.js"],"sourcesContent":["import { Fragment } from 'react';\nimport {Link} from 'react-router-dom'\n\nimport MetaData from \"../layouts/MetaData\";\n\n\nimport { useAlert } from \"react-alert\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addItemToCart,removeItemFromCart } from \"../../actions/cartActions\";\n\n\n\n\nconst Cart  = ({history})=>{\n    const dispatch = useDispatch();\n    const {cartItems} = useSelector(state=>state.cart)\n    // console.log(cartItems)\n \n    // console.log(cartItems.length)\n\n    const removeItemCartHandler = (id)=>{\n             dispatch(removeItemFromCart(id))\n    }\n\n    const increaseQty = (id, quantity, stock) => {\n      const newQty = quantity + 1;\n\n        if (newQty > stock) return;\n\n       dispatch(addItemToCart(id, newQty))\n    }\n\n    const decreaseQty = (id, quantity) => {\n\n        const newQty = quantity -1;\n\n        if (newQty <= 0) return;\n\n       dispatch(addItemToCart(id, newQty)) \n\n    }\n\n    const checkoutHandler = () => {\n        history.push('/login?redirect=ship')\n    }\n\n    return (\n        <Fragment>\n            <MetaData title={'Your Cart'}/>\n            {cartItems.length ===0 ?  <h2 className='mt-5'>YOur Cart is Empty</h2> : (\n                <Fragment>\n                       <h2 className=\"mt-5\">Your Cart: <b>{cartItems.length}items</b></h2>\n        \n        <div className=\"row d-flex justify-content-between\">\n            <div className=\"col-12 col-lg-8\">\n                {cartItems.map(item=>(\n                      <Fragment>\n                          <hr/>\n\n                          <div className=\"cart-item\" key={item.product}>\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-3\">\n                            <img src={item.image} alt=\"Laptop\" height=\"90\" width=\"115\"/>\n                        </div>\n\n                        <div className=\"col-5 col-lg-3\">\n                            <Link to={`/ products/${item.product}`}>{item.name}</Link>\n                        </div>\n\n\n                        <div className=\"col-4 col-lg-2 mt-4 mt-lg-0\">\n                            <p id=\"card_item_price\">{item.price}</p>\n                        </div>\n\n                        <div className=\"col-4 col-lg-3 mt-4 mt-lg-0\">\n                            <div className=\"stockCounter d-inline\">\n                                <span className=\"btn btn-danger minus\" onClick={()=>decreaseQty(item.product, item.quantity)}>-</span>\n                                <input type=\"number\" className=\"form-control count d-inline\" value={item.quantity} readOnly />\n\n\t\t\t\t\t\t\t\t<span className=\"btn btn-primary plus\" onClick={()=>increaseQty(item.product, item.quantity,item.stock)}>+</span>\n                            </div>\n                        </div>\n\n                        <div className=\"col-4 col-lg-1 mt-4 mt-lg-0\">\n                            <i id=\"delete_cart_item\" className=\"fa fa-trash btn btn-danger\" onClick={()=>removeItemCartHandler(item.product)}></i>\n                        </div>\n\n                    </div>\n                </div>\n                <hr />\n                      </Fragment>\n                ))}\n               \n            </div>\n\n            <div className=\"col-12 col-lg-3 my-4\">\n                <div id=\"order_summary\">\n                    <h4>Order Summary</h4>\n                    <hr />\n                    <p>Subtotal:  <span className=\"order-summary-values\">{cartItems.reduce((acc,item)=>(acc + Number(item.quantity)),0)} (Units)</span></p>\n                    <p>Est. total: <span className=\"order-summary-values\">${cartItems.reduce((acc,item)=>(acc + item.quantity * item.price),0).toFixed(2)}</span></p>\n    \n                    <hr />\n                    <button id=\"checkout_btn\" className=\"btn btn-primary btn-block\" onClick={checkoutHandler}>Check out</button>\n                </div>\n            </div>\n        </div>\n                    </Fragment>\n            )}\n\n        </Fragment>\n    )\n}\n\n\nexport default Cart;"],"mappings":"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"},"metadata":{},"sourceType":"module"}